@model AuctionSystem.DTOs.ItemDto
@{
    Layout = null;
}

<!DOCTYPE html>
<html>
<head>
    <title>Item</title>
    <link rel="stylesheet" type="text/css" href="~/css/site.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">

</head>
<body>
    <div class="row">
        <div class="col-md-2"></div>
        <div class="col-md-8">
            <h1>Edit Item</h1>
            <div class="row pl-2 pr-2">
                <div class="col-md-3">
                    <label class="control-label">Name</label>
                    <input id="txtName" type="text" class="form-control" placeholder="Name" />
                </div>
                <div class="col-md-3">
                    <label class="control-label">Description</label>
                    <input id="txtDescription" type="text" class="form-control" placeholder="Description" />
                </div>
                <div class="col-md-3">
                    <label class="control-label">Started price</label>
                    <input id="txtStartedPrice" type="text" class="form-control" placeholder="Started price" />
                </div>
                <div class="col-md-3">
                    <label class="control-label">HighestPrice</label>
                    <input id="txtHighestPrice" type="text" class="form-control" placeholder="HighestPrice" />
                </div>
            </div>
            <br />
            <div class="row pl-2 pr-2">
                <div class="col-md-3">
                    <label class="control-label">HighestBidder</label>
                    <input id="txtHighestBidder" type="text" class="form-control" placeholder="HighestBidder" />
                </div>
                <div class="col-md-3">
                    <label class="control-label">Status</label>
                    <input id="txtStatus" type="text" class="form-control" placeholder="Status" />
                </div>
            </div>
            <br />
            <button type="button" id="btnSave" class="btn btn-primary btn-sm">Submit</button>
        </div>
        <div class="col-md-2"></div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.min.js" integrity="sha384-skAcpIdS7UcVUC05LJ9Dxay8AXcDYfBJqt1CJ85S/CFujBsIzCIv+l9liuYLaMQ/" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <script>
        $(document).ready(function () {
            $('#btnSave').click(function (event) {
                event.preventDefault();

                function parseNullableFloat(value) {
                    return value === "" ? null : parseFloat(value);
                }

                var formData = {
                    name: $('#txtName').val(),
                    description: $('#txtDescription').val(),
                    startedPrice: parseNullableFloat($('#txtStartedPrice').val()),
                    highestPrice: parseNullableFloat($('#txtHighestPrice').val()),
                    highestBidder: $('#txtHighestBidder').val(),
                    status: $('#txtStatus').val()
                };

                $.ajax({
                    url: '/api/Item/New',
                    type: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify(formData),
                    success: function (data) {
                        window.location = '/';
                    },
                    error: function (jqXHR, textStatus, errorThrown) {
                        alert('Something went wrong, please try again.');
                    }
                });
            });
        });
    </script>
</body>
</html>

